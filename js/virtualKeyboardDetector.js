var virtualKeyboardDetector=function(t,e){var r=3e3,o=previousViewportWidth=viewportWidthWithoutVirtualKeyboard=t.innerWidth,u=previousViewportHeight=viewportHeightWithoutVirtualKeyboard=t.innerHeight,n=!1,d=!1,a=null,h=["INPUT","TEXTAREA"],v={};function l(i){void 0!==i&&void 0!==i.recentlyFocusedTimeoutDuration&&(r=i.recentlyFocusedTimeoutDuration),o=previousViewportWidth=viewportWidthWithoutVirtualKeyboard=t.innerWidth,u=previousViewportHeight=viewportHeightWithoutVirtualKeyboard=t.innerHeight,document.addEventListener("focus",b,!0),t.addEventListener("resize",V)}function p(i,t){void 0===v[i]&&(v[i]=[]),v[i].push(t)}function s(i,t){if(void 0!==v[i])if(void 0===t)v[i]=[];else for(var e=v[i].length;e--;)v[i][e]==t&&v[i].splice(e,1)}function c(t,e){for(i in v[t])"function"==typeof v[t][i]&&v[t][i](e)}function b(i){void 0!==i.target&&void 0!==i.target.nodeName&&-1!=h.indexOf(i.target.nodeName)&&function(i){null!=a&&(t.clearTimeout(a),a=null);d=!0,a=t.setTimeout(w,r)}()}function w(){d=!1}function V(){o=t.innerWidth,u=t.innerHeight,n&&o==previousViewportWidth&&u>=viewportHeightWithoutVirtualKeyboard&&g(),o!=previousViewportWidth&&("activeElement"in document&&document.activeElement.blur(),g()),!n&&d&&o==previousViewportWidth&&u<previousViewportHeight&&c("virtualKeyboardVisible",{virtualKeyboardVisible:n=!0,sizes:W()}),0==n&&(viewportWidthWithoutVirtualKeyboard=o,viewportHeightWithoutVirtualKeyboard=u),previousViewportWidth=o,previousViewportHeight=u}function g(){c("virtualKeyboardHidden",{virtualKeyboardVisible:n=!1,sizes:W()})}function W(){return{viewportWithoutVirtualKeyboard:{width:viewportWidthWithoutVirtualKeyboard,height:viewportHeightWithoutVirtualKeyboard},currentViewport:{width:o,height:u},virtualKeyboard:{width:o,height:viewportHeightWithoutVirtualKeyboard-u}}}return l({recentlyFocusedTimeoutDuration:3e3}),{init:l,isVirtualKeyboardVisible:function(){return n},getVirtualKeyboardSize:function(){return!!n&&{width:o,height:viewportHeightWithoutVirtualKeyboard-u}},on:p,addEventListener:p,subscribe:p,off:s,removeEventListener:s,unsubscribe:s,trigger:c,publish:c,dispatchEvent:c}}(window);